	processor 16f877
	include<p16f877.inc>
ORG 0
GOTO INICIO
ORG 5
INICIO:
	BSF STATUS,RP0	;Cambio al banco 1
	BCF STATUS,RP1
	CLRF PORTB		;PORTB = 0
	CLRF TRISB		;Configuro puerto B como salida
	BSF TXSTA,BRGH  ;BRGH = 1
	MOVLW D'129'	;W = 129
	MOVWF SPBRG		;SPBRG = W = 129
	BCF TXSTA,SYNC	;SYNC = 0
	BSF TXSTA,TXEN	;TXEN = 1
	BCF STATUS,RP0	;Cambio al banco 0
	BSF RCSTA,SPEN	;SPEN  = 1
	BSF RCSTA,CREN	;CREN = 1
RECIBE:
	BTFSS PIR1,RCIF	;If (RCIF = 1) {salta}
	GOTO RECIBE		;else {RECIBE} 
	MOVF RCREG,W	;W = RCREG
	MOVWF PORTB		;PORTD = RCREG
	MOVWF TXREG		;TXREG = W
	BSF STATUS,RP0	;Cambio al banco 1
TRASMITE:
	BTFSS TXSTA,TRMT;if (TRMT = 1) {Salta}
	GOTO TRASMITE	;else {TRANSMITE}
	BCF STATUS,RP0	;Cambio al banco 0
	GOTO RECIBE		;Va a RECIBE
	END